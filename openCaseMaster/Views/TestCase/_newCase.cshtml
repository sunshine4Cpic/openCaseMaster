
@using openCaseMaster.ViewModels;
@model NewCaseModel

@{
    string nameLabel, markLabel;
    if (Model.type == 0)
    { nameLabel = "文件夹"; }
    else
    { nameLabel = "案例"; }
    markLabel = "备注";
}


<script>
    //@@ sourceURL=cp_list.js
    function ResetForm() {
        document.getElementById('Name').value = "";
        document.getElementById('mark').value = "";
    }

    function Save() {

            var e =
                {
                    projectID: $('#projectID').val(),
                    baseID: $('#baseID').val(),
                    Name: $('#Name').val(),
                    mark: $('#mark').val(),
                    type: $('#type').val()
                };
            if (e.Name.trim().length == 0)
                return;


            $.post("/TestCase/AddNew", e).then(
                function (r) {
                    //这里未判断是否正确返回
                    $('#dialog').dialog('close');
                    reloadNode();
                    
                }
                );

    }


    $(function () {
        //设置text需要验证  第五次改版
        $('input[type=text]').validatebox();
    })

</script>


<input type="hidden" id="projectID" name="projectID" value="@Model.projectID" />
<input type="hidden" id="baseID" name="baseID" value="@Model.baseID" />

<input type="hidden" id="type" name="type" value="@Model.type" />
<br />
<div class="form-horizontal">
    <div class="form-group">
        <label class="col-md-4 control-label">@nameLabel</label>
        <div class="col-md-8">

            <input type="text" id="Name" name="Name" value="@Model.Name" class="easyui-validatebox"
                   data-options="required:true,validType:'length[1,50]',missingMessage:'不能为空'" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-4 control-label">@markLabel</label>
        <div class="col-md-8">
            <input type="text" id="mark" name="mark" value="@Model.mark" />
           
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-4 col-md-8">
            <input type="button" name="BtnSubmit" value="提交" onclick="Save();" />

            <input type="button" name="BtnReset" value="重置" onclick="ResetForm();" />
        </div>
    </div>

</div>

